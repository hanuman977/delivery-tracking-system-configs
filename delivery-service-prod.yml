spring:
  config:
    activate:
      on:
        profile: prod

  datasource:
    url: "${SPRING_DATASOURCE_URL:jdbc:postgresql}"
    username: "${SPRING_DATASOURCE_USERNAME}"
    password: "${SPRING_DATASOURCE_PASSWORD}"
    driver-class-name: "${SPRING_DATASOURCE_DRIVER}"

  jpa:
    hibernate:
      ddl-auto: "validate"
    show-sql: "false"

  kafka:
    bootstrap-servers: "${MSK_SERVERLESS_BOOTSTRAP_URL}:9098"
    properties:
      security.protocol: SASL_SSL
      sasl.mechanism: AWS_MSK_IAM
      sasl.jaas.config: software.amazon.msk.auth.iam.IAMLoginModule required;
      sasl.client.callback.handler.class: software.amazon.msk.auth.iam.IAMClientCallbackHandler
    producer:
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.springframework.kafka.support.serializer.JsonSerializer

eureka:
  client:
    service-url:
      defaultZone: "http://eureka-server:8761/eureka"
    register-with-eureka: "true"
    fetch-registry: "true"
  instance:
    prefer-ip-address: true
